From 5aaea7f52d79100b5bd656721da0611377fa92c4 Mon Sep 17 00:00:00 2001
From: "H. Vetinari" <h.vetinari@gmx.com>
Date: Fri, 22 Apr 2022 15:31:25 +1100
Subject: [PATCH 2/2] enable shared libs on windows

---
 CMakeLists.txt | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

diff --git a/CMakeLists.txt b/CMakeLists.txt
index bd2b3d471..dca63fafa 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -14,6 +14,9 @@ if(CONDA_ROOT)
     set(CMAKE_LIBRARY_PATH "${CONDA_ROOT}/lib")
     link_directories("${CONDA_ROOT}/lib")
     include_directories("${CONDA_ROOT}/include")
+    if (MSVC)
+        link_directories("${CONDA_ROOT}/bin")
+    endif()
     if (NOT CUDA_TOOLKIT_ROOT_DIR)
         set(CUDA_TOOLKIT_ROOT_DIR "${CONDA_ROOT}")
     endif()
@@ -50,7 +53,7 @@ if(BUILD_SHARED_LIBS)
     set(CMAKE_POSITION_INDEPENDENT_CODE ON)
     if(WIN32)
         set(CMAKE_WINDOWS_EXPORT_ALL_SYMBOLS ON)
-        message(FATAL_ERROR "DLL is not supported currently")
+        # message(FATAL_ERROR "DLL is not supported currently")
     elseif(APPLE)
         set(CMAKE_INSTALL_RPATH "@loader_path")
     else()
-- 
2.35.3.windows.1

